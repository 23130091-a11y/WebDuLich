
{% extends 'travel/base.html' %}
{% load static %}
{% load currency_filters %}

{% block title %}Trang ch·ªß - Du L·ªãch Vi·ªát{% endblock %}

{% block content %}


<main>
    <!-- Banner -->
    <section class="hero position-relative text-center">
        <img src="{% static 'images/banner.jpg' %}" class="hero-img">

        <!-- Thanh t√¨m ki·∫øm -->
        <div class="search-box container-fluid rounded-4 shadow-lg p-4 position-absolute top-50 start-50 translate-middle bg-white" style="max-width: 950px;">
            
            <!-- T√¨m ki·∫øm nhanh -->
            <div class="quick-search mb-4" style="overflow: visible;">
                <form method="GET" action="{% url 'travel:search' %}" class="position-relative" id="quickSearchForm" style="overflow: visible;">
                    <div class="input-group input-group-lg">
                        <span class="input-group-text bg-white border-end-0">
                            <i class="fa-solid fa-magnifying-glass text-primary"></i>
                        </span>
                        <input type="text" name="q" id="quickSearchInput" class="form-control border-start-0" 
                               placeholder="T√¨m ki·∫øm ƒë·ªãa ƒëi·ªÉm... (VD: H√† N·ªôi, Ch√πa M·ªôt C·ªôt, H·ªì Ho√†n Ki·∫øm)" 
                               autocomplete="off">
                        <button type="submit" class="btn btn-primary px-4">
                            <i class="fa-solid fa-search me-1"></i>T√¨m
                        </button>
                    </div>
                    <div id="quickSuggestions" class="autocomplete-box"></div>
                </form>
            </div>

            <!-- T√¨m ki·∫øm chi ti·∫øt -->
            <form class="row align-items-center gx-3 justify-content-center" method="GET" action="{% url 'travel:search' %}" id="detailSearchForm">
                <div class="col-md-3 position-relative" style="overflow: visible;">
                    <div class="input-group">
                        <span class="input-group-text bg-white">
                            <i class="fa-solid fa-location-dot text-primary"></i>
                        </span>
                        <input type="text" name="from_location" id="fromLocationInput" class="form-control" 
                               placeholder="V·ªã tr√≠ c·ªßa b·∫°n" autocomplete="off">
                    </div>
                    <div id="fromLocationSuggestions" class="autocomplete-box"></div>
                </div>

                <div class="col-md-3 position-relative" style="overflow: visible;">
                    <div class="input-group">
                        <span class="input-group-text bg-white">
                            <i class="fa-solid fa-map-location-dot text-primary"></i>
                        </span>
                        <input type="text" name="q" id="toLocationInput" class="form-control" 
                               placeholder="N∆°i mu·ªën ƒë·∫øn" autocomplete="off">
                    </div>
                    <div id="toLocationSuggestions" class="autocomplete-box"></div>
                </div>

                <div class="col-md-3">
                    <div class="input-group">
                        <span class="input-group-text bg-white">
                            <i class="fa-solid fa-calendar-days text-primary"></i>
                        </span>
                        <input type="date" name="travel_date" id="travelDateInput" class="form-control">
                    </div>
                </div>

                <div class="col-md-3">
                    <button type="submit" class="btn btn-warning w-100 fw-bold py-2">
                        <i class="fa-solid fa-route me-1"></i>T√¨m ki·∫øm chi ti·∫øt
                    </button>
                </div>
            </form>

            <!-- G·ª£i √Ω nhanh -->
            <div class="quick-links mt-3 text-center">
                <small class="text-muted me-2">ƒê·ªãa ƒëi·ªÉm ph·ªï bi·∫øn:</small>
                <a href="{% url 'travel:search' %}?q=H√† N·ªôi" class="badge bg-light text-dark me-2 text-decoration-none py-2 px-3">H√† N·ªôi</a>
                <a href="{% url 'travel:search' %}?q=TP H·ªì Ch√≠ Minh" class="badge bg-light text-dark me-2 text-decoration-none py-2 px-3">TP H·ªì Ch√≠ Minh</a>
                <a href="{% url 'travel:search' %}?q=ƒê√† N·∫µng" class="badge bg-light text-dark me-2 text-decoration-none py-2 px-3">ƒê√† N·∫µng</a>
                <a href="{% url 'travel:search' %}?q=ƒê√† L·∫°t" class="badge bg-light text-dark me-2 text-decoration-none py-2 px-3">ƒê√† L·∫°t</a>
            </div>
        </div>
    </section>

    <!-- L·ªãch s·ª≠ t√¨m ki·∫øm - Section ri√™ng -->
    <section id="searchHistorySection" class="search-history-section py-3 d-none">
        <div class="container">
            <div class="search-history-card bg-white rounded-4 shadow-sm p-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="mb-0 fw-bold">
                        <i class="fa-solid fa-clock-rotate-left text-primary me-2"></i>T√¨m ki·∫øm g·∫ßn ƒë√¢y
                    </h5>
                    <button type="button" class="btn btn-outline-danger btn-sm" id="clearAllHistory">
                        <i class="fa-solid fa-trash-can me-1"></i>X√≥a t·∫•t c·∫£
                    </button>
                </div>
                <div id="searchHistoryList" class="d-flex flex-wrap gap-2"></div>
            </div>
        </div>
    </section>

    <section id="categorySection" class="categories bg-light">
        <div class="container-fluid text-center py-5">
            <h3 class="fw-bold mb-5">Kh√°m ph√° theo danh m·ª•c</h3>
            
            <div class="row g-4 justify-content-center flex-md-wrap flex-nowrap overflow-auto pb-3">
                
                {% for cat in categories %}
                    <div class="col-6 col-sm-4 col-md-2">
                        <div class="card h-100 border-0 shadow-sm p-3 category-card d-flex flex-column align-items-center justify-content-center">
                            <a href="{% url 'travel:category_detail' slug=cat.slug %}" class="text-decoration-none text-dark w-100">
                                <div class="icon-wrapper mb-3">
                                    <i class="fa-solid {{ cat.icon|default:'fa-map-marker-alt' }} fa-3x text-info"></i>
                                </div>
                                <p class="mt-2 fw-semibold mb-0" style="font-size: 0.9rem; line-height: 1.2;">{{ cat.name }}</p>
                            </a>
                        </div>
                    </div>
                    {% endfor %}

            </div>
        </div>
    </section>

    <style>
        .category-card {
            transition: transform 0.3s ease;
            min-height: 150px; /* C·ªë ƒë·ªãnh chi·ªÅu cao t·ªëi thi·ªÉu ƒë·ªÉ c√°c √¥ b·∫±ng nhau */
        }
        .category-card:hover {
            transform: translateY(-5px);
        }
        .icon-wrapper {
            height: 60px; /* C·ªë ƒë·ªãnh chi·ªÅu cao khu v·ª±c ch·ª©a icon */
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>


    <!-- G·ª£i √Ω c√° nh√¢n h√≥a -->
    {% if personalized_destinations %}
    <section class="recommend py-5 bg-white" id="personalized-section">
        <div class="container">
            <h2 class="fw-bold mb-3 text-center">
                <i class="fa-solid fa-heart text-primary me-2"></i>D√†nh ri√™ng cho b·∫°n
            </h2>
            <p class="text-muted mb-4 text-center">G·ª£i √Ω d·ª±a tr√™n s·ªü th√≠ch c·ªßa b·∫°n</p>
            <div class="row g-4">
                {% for dest in personalized_destinations %}
                <div class="col-md-4">
                    <div class="card h-100 shadow-sm border-primary">
                        <div class="position-relative">
                            {% if dest.image %}
                            <img src="{{ dest.image.url }}" class="card-img-top" alt="{{ dest.name }}" style="height: 200px; object-fit: cover;">
                            {% else %}
                            <div class="bg-secondary text-white d-flex align-items-center justify-content-center" style="height: 200px;">
                                <i class="fa-solid fa-image fa-3x"></i>
                            </div>
                            {% endif %}
                            <span class="badge bg-primary position-absolute top-0 end-0 m-2">
                                <i class="fa-solid fa-heart"></i> Ph√π h·ª£p v·ªõi b·∫°n
                            </span>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">{{ dest.name }}</h5>
                            <p class="text-muted small">
                                <i class="fa-solid fa-location-dot"></i> {{ dest.location }}
                            </p>
                            {% if dest.recommendation %}
                            <div class="mb-2">
                                <span class="text-warning">
                                    {% for i in "12345" %}
                                        {% if forloop.counter <= dest.recommendation.avg_rating %}‚òÖ{% else %}‚òÜ{% endif %}
                                    {% endfor %}
                                </span>
                                <small class="text-muted">({{ dest.recommendation.total_reviews }} ƒë√°nh gi√°)</small>
                            </div>
                            {% endif %}
                            <a href="{% url 'travel:destination_detail' dest.id %}" class="btn btn-outline-primary btn-sm w-100">
                                Xem chi ti·∫øt
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}

    <!-- ƒê·ªãa ƒëi·ªÉm ƒë∆∞·ª£c g·ª£i √Ω cao -->
    {% if top_destinations %}
    <section class="recommend py-5 bg-light" id="recommend-section">
        <div class="container">
            <h2 class="fw-bold mb-3 text-center">
                <i class="fa-solid fa-star text-warning me-2"></i>ƒê·ªãa ƒëi·ªÉm ƒë∆∞·ª£c g·ª£i √Ω
            </h2>
            <p class="text-muted mb-4 text-center">D·ª±a tr√™n ƒë√°nh gi√° v√† ph√¢n t√≠ch AI</p>
            <div class="row g-4">
                {% for dest in top_destinations %}
                <div class="col-md-4">
                    <div class="card h-100 shadow-sm">
                        <div class="position-relative">
                            {% if dest.image %}
                            <img src="{{ dest.image.url }}" class="card-img-top" alt="{{ dest.name }}" style="height: 200px; object-fit: cover;">
                            {% else %}
                            <div class="bg-secondary text-white d-flex align-items-center justify-content-center" style="height: 200px;">
                                <i class="fa-solid fa-image fa-3x"></i>
                            </div>
                            {% endif %}
                            <span class="badge bg-success position-absolute top-0 end-0 m-2">
                                {{ dest.recommendation.overall_score|floatformat:0 }} ƒëi·ªÉm
                            </span>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title fw-bold text-truncate">{{ dest.name }}</h5>
                            
                            <p class="text-muted small mb-2">
                                <i class="fa-solid fa-location-dot text-danger"></i> {{ dest.location }}
                            </p>

                            <div class="mb-3">
                                <span class="text-warning">
                                    {% for i in "12345" %}
                                        {% if forloop.counter <= dest.recommendation.overall_score %}‚òÖ{% else %}‚òÜ{% endif %}
                                    {% endfor %}
                                </span>
                                <small class="text-muted">({{ dest.reviews.count }} ƒë√°nh gi√°)</small>
                            </div>

                            <p class="card-text small text-secondary mb-3" style="height: 40px; overflow: hidden;">
                                {{ dest.description|truncatechars:80 }}
                            </p>

                            <div class="d-flex justify-content-between align-items-center pt-2 border-top">
                                <span class="text-info small fw-bold">
                                    <i class="fa-solid fa-route"></i> {{ dest.num_tours|default:"0" }} Tour hi·ªán c√≥
                                </span>
                                <a href="{% url 'travel:destination_detail' dest.id %}" class="btn btn-primary btn-sm px-3 shadow-sm">
                                    Kh√°m ph√°
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="text-center mt-4">
                <a href="{% url 'travel:search' %}" class="btn btn-primary">Xem t·∫•t c·∫£ ƒë·ªãa ƒëi·ªÉm</a>
            </div>
        </div>
    </section>
    {% endif %}

    <section class="featured-tours py-5">
        <div class="container">
            <h2 class="fw-bold mb-4 text-center">
                <i class="fa-solid fa-star text-warning me-2"></i>Tour du l·ªãch h·∫•p d·∫´n
            </h2>
            
            <div class="row">
                {% for tour in featured_tours %}
                <div class="col-md-4 mb-4">
                    <div class="card h-100 border-0 shadow-sm tour-card-hover">
                        <div class="position-relative overflow-hidden rounded-top">
                            {% if tour.image_main %}
                                <img src="{{ tour.image_main.url }}" class="card-img-top" alt="{{ tour.name }}" style="height: 250px; object-fit: cover;">
                            {% else %}
                                <div class="bg-secondary d-flex align-items-center justify-content-center" style="height: 250px;">
                                    <i class="fa-solid fa-image fa-3x text-white"></i>
                                </div>
                            {% endif %}
                            
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-primary px-3 py-2 shadow-sm">{{ tour.category.name }}</span>
                            </div>

                            <div class="position-absolute top-0 end-0 m-3">
                                <button class="btn btn-sm btn-light rounded-circle shadow-sm favorite-btn" 
                                        data-url="{% url 'travel:toggle_tour_favorite' tour.id %}"
                                        style="width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; border: none;">
                                    <i class="{% if request.user in tour.favorites.all %}fa-solid{% else %}fa-regular{% endif %} fa-heart text-danger"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="card-body p-4">
                            <div class="mb-2">
                                <a href="{% url 'travel:destination_detail' tour.destination.id %}" class="text-decoration-none">
                                    <span class="badge bg-info-subtle text-info">
                                        <i class="fa-solid fa-location-dot me-1"></i> {{ tour.destination.name }}
                                    </span>
                                </a>
                            </div>
                            <h5 class="card-title fw-bold mb-2">{{ tour.name }}</h5>
                            
                            <p class="text-muted small mb-3">
                                <i class="fa-solid fa-clock me-1"></i> {{ tour.duration|default:"Li√™n h·ªá" }}
                            </p>
                            
                            <div class="d-flex justify-content-between align-items-center mt-3 pt-3 border-top">
                                <div>
                                    <span class="text-muted small d-block">Gi√° t·ª´</span>
                                    <span class="text-danger fw-bold fs-5">{{ tour.price|floatformat:0 }} VND</span>
                                </div>
                                
                                <a href="{% url 'travel:tour_detail' tour.slug %}" class="btn btn-primary px-3">
                                    Xem chi ti·∫øt
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% empty %}
                    <div class="col-12 text-center">
                        <p class="text-muted">Hi·ªán ch∆∞a c√≥ tour n·ªïi b·∫≠t n√†o.</p>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <section class="personalized-recommendations">
        <h2>D√†nh ri√™ng cho {{ request.user.username|default:"b·∫°n" }}</h2>
        <div class="row">
            {% for tour in personalized_tours %}
                <div class="col-md-4">
                    <div class="card shadow-sm mb-4">
                        <img src="{{ tour.image_main.url }}" class="card-img-top" alt="{{ tour.name }}">
                        <div class="card-body">
                            <h5 class="card-title">{{ tour.name }}</h5>
                            <p class="text-warning">‚≠ê {{ tour.average_rating }} ({{ tour.total_reviews }} ƒë√°nh gi√°)</p>
                            <p class="card-text">{{ tour.price }} VNƒê</p>
                            <a href="{% url 'tour_detail' tour.slug %}" class="btn btn-primary">Xem chi ti·∫øt</a>
                        </div>
                    </div>
                </div>
            {% empty %}
                <p>H√£y ch·ªçn s·ªü th√≠ch ƒë·ªÉ ch√∫ng t√¥i g·ª£i √Ω tour t·ªët h∆°n cho b·∫°n!</p>
            {% endfor %}
        </div>
    </section>

    <!-- G·ª£i √Ω ƒë·ªãa ƒëi·ªÉm t·ª´ th∆∞ m·ª•c ·∫£nh -->
    <section class="recommend py-5">
        <div class="container text-center">
            <h2 class="fw-bold mb-3">D·∫£i ƒê·∫•t H√¨nh Ch·ªØ S</h2>
            <p class="text-muted mb-4">Kh√°m ph√° Vi·ªát Nam theo c√°ch ri√™ng c·ªßa b·∫°n</p>
            <div class="row justify-content-center g-4">
                {% for r in results %}
                <div class="col-md-3">
                    <div class="card shadow-sm border-0 position-relative">
                        <div class="image-wrapper">
                            <img src="{% static 'images/' %}{{ r.images.0 }}" class="card-img-top" alt="{{ r.name }}">
                            <div class="image-overlay">
                                <div class="slideshow">
                                    {% for img in r.images %}
                                    <img src="{% static 'images/' %}{{ img }}" class="slide {% if forloop.first %}active{% endif %}">
                                    {% endfor %}
                                    <button class="prev">&#10094;</button>
                                    <button class="next">&#10095;</button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body text-center">
                            <h5 class="card-title fw-bold">{{ r.name }}</h5>
                            <p class="card-text">{{ r.desc }}</p>
                            <button class="btn btn-outline-primary explore-btn">Kh√°m ph√° ngay</button>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
</main>




<!-- Modal ƒëƒÉng k√Ω/ƒëƒÉng nh·∫≠p -->
<div class="modal fade" id="authModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg" style="border-radius: 16px; overflow: hidden;">
            
            <!-- Header -->
            <div class="modal-header border-0 text-white py-4" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <div class="w-100 text-center">
                    <i class="fa-solid fa-plane-departure fa-2x mb-2"></i>
                    <h4 id="modalTitle" class="modal-title mb-0 fw-bold">ƒêƒÉng nh·∫≠p</h4>
                    <p class="mb-0 small opacity-75">Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi Du L·ªãch Vi·ªát</p>
                </div>
                <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3" data-bs-dismiss="modal"></button>
            </div>

            <!-- Body -->
            <div class="modal-body p-4">
                <div id="authAlert" class="alert d-none" role="alert"></div>

                <!-- Form ƒêƒÉng nh·∫≠p -->
                <div id="loginForm">
                    <div class="mb-3">
                        <label for="loginEmail" class="form-label fw-semibold">
                            <i class="fa-solid fa-envelope text-muted me-1"></i>Email
                        </label>
                        <input type="email" class="form-control form-control-lg" id="loginEmail" 
                               placeholder="Nh·∫≠p email c·ªßa b·∫°n" style="border-radius: 10px;">
                    </div>
                    <div class="mb-3">
                        <label for="loginPassword" class="form-label fw-semibold">
                            <i class="fa-solid fa-lock text-muted me-1"></i>M·∫≠t kh·∫©u
                        </label>
                        <div class="input-group">
                            <input type="password" class="form-control form-control-lg" id="loginPassword" 
                                   placeholder="Nh·∫≠p m·∫≠t kh·∫©u" style="border-radius: 10px 0 0 10px;">
                            <button class="btn btn-outline-secondary" type="button" id="toggleLoginPassword" 
                                    style="border-radius: 0 10px 10px 0;">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="rememberMe">
                            <label class="form-check-label small" for="rememberMe">Ghi nh·ªõ ƒëƒÉng nh·∫≠p</label>
                        </div>
                        <a href="#" id="forgotPasswordLink" class="small text-decoration-none">Qu√™n m·∫≠t kh·∫©u?</a>
                    </div>
                    
                    <button id="loginBtn" class="btn btn-primary btn-lg w-100 mb-3" style="border-radius: 10px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none;">
                        <i class="fa-solid fa-right-to-bracket me-2"></i>ƒêƒÉng nh·∫≠p
                    </button>
                    
                    <div class="text-center mb-3">
                        <span class="text-muted">ho·∫∑c ƒëƒÉng nh·∫≠p v·ªõi</span>
                    </div>
                    
                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-outline-danger flex-fill" style="border-radius: 10px;" id="googleLoginBtn">
                            <i class="fa-brands fa-google me-2"></i>Google
                        </button>
                        <button class="btn btn-outline-primary flex-fill" style="border-radius: 10px;" id="facebookLoginBtn">
                            <i class="fa-brands fa-facebook me-2"></i>Facebook
                        </button>
                    </div>
                    
                    <div class="text-center">
                        <span class="text-muted">Ch∆∞a c√≥ t√†i kho·∫£n? </span>
                        <a href="#" id="showRegisterLink" class="fw-semibold text-decoration-none">ƒêƒÉng k√Ω ngay</a>
                    </div>
                </div>

                <!-- Form ƒêƒÉng k√Ω -->
                <div id="registerForm" class="d-none">
                    <div class="mb-3">
                        <label for="registerUsername" class="form-label fw-semibold">
                            <i class="fa-solid fa-user text-muted me-1"></i>T√™n hi·ªÉn th·ªã
                        </label>
                        <input type="text" class="form-control form-control-lg" id="registerUsername" 
                               placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n" style="border-radius: 10px;">
                    </div>
                    <div class="mb-3">
                        <label for="registerEmail" class="form-label fw-semibold">
                            <i class="fa-solid fa-envelope text-muted me-1"></i>Email
                        </label>
                        <input type="email" class="form-control form-control-lg" id="registerEmail" 
                               placeholder="Nh·∫≠p email c·ªßa b·∫°n" style="border-radius: 10px;">
                    </div>
                    <div class="mb-3">
                        <label for="registerPassword" class="form-label fw-semibold">
                            <i class="fa-solid fa-lock text-muted me-1"></i>M·∫≠t kh·∫©u
                        </label>
                        <div class="input-group">
                            <input type="password" class="form-control form-control-lg" id="registerPassword" 
                                   placeholder="T·ªëi thi·ªÉu 6 k√Ω t·ª±" style="border-radius: 10px 0 0 10px;">
                            <button class="btn btn-outline-secondary" type="button" id="toggleRegisterPassword"
                                    style="border-radius: 0 10px 10px 0;">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </div>
                        <div class="progress mt-2" style="height: 5px;">
                            <div id="passwordStrength" class="progress-bar" role="progressbar" style="width: 0%"></div>
                        </div>
                        <small id="passwordStrengthText" class="text-muted"></small>
                    </div>
                    <div class="mb-3">
                        <label for="registerConfirmPassword" class="form-label fw-semibold">
                            <i class="fa-solid fa-lock text-muted me-1"></i>X√°c nh·∫≠n m·∫≠t kh·∫©u
                        </label>
                        <input type="password" class="form-control form-control-lg" id="registerConfirmPassword" 
                               placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u" style="border-radius: 10px;">
                    </div>
                    
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="agreeTerms">
                        <label class="form-check-label small" for="agreeTerms">
                            T√¥i ƒë·ªìng √Ω v·ªõi <a href="#" class="text-decoration-none">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a> v√† 
                            <a href="#" class="text-decoration-none">Ch√≠nh s√°ch b·∫£o m·∫≠t</a>
                        </label>
                    </div>
                    
                    <button id="registerBtn" class="btn btn-success btn-lg w-100 mb-3" style="border-radius: 10px;">
                        <i class="fa-solid fa-user-plus me-2"></i>ƒêƒÉng k√Ω
                    </button>
                    
                    <div class="text-center">
                        <span class="text-muted">ƒê√£ c√≥ t√†i kho·∫£n? </span>
                        <a href="#" id="showLoginLink" class="fw-semibold text-decoration-none">ƒêƒÉng nh·∫≠p</a>
                    </div>
                </div>

                <!-- Form Qu√™n m·∫≠t kh·∫©u -->
                <div id="forgotPasswordForm" class="d-none">
                    <div class="text-center mb-4">
                        <i class="fa-solid fa-key fa-3x text-warning mb-3"></i>
                        <p class="text-muted">Nh·∫≠p email ƒë·ªÉ nh·∫≠n link ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u</p>
                    </div>
                    <div class="mb-3">
                        <input type="email" class="form-control form-control-lg" id="forgotEmail" 
                               placeholder="Nh·∫≠p email c·ªßa b·∫°n" style="border-radius: 10px;">
                    </div>
                    <button id="resetPasswordBtn" class="btn btn-warning btn-lg w-100 mb-3" style="border-radius: 10px;">
                        <i class="fa-solid fa-paper-plane me-2"></i>G·ª≠i y√™u c·∫ßu
                    </button>
                    <div class="text-center">
                        <a href="#" id="backToLoginLink" class="text-decoration-none">
                            <i class="fa-solid fa-arrow-left me-1"></i>Quay l·∫°i ƒëƒÉng nh·∫≠p
                        </a>
                    </div>
                </div>

                <!-- Form S·ªü th√≠ch -->
                <div id="preferencesForm" class="d-none">
                    <div class="text-center mb-4">
                        <i class="fa-solid fa-heart fa-3x text-danger mb-3"></i>
                        <h5 class="fw-bold">Ch·ªçn s·ªü th√≠ch c·ªßa b·∫°n</h5>
                        <p class="text-muted small">Gi√∫p ch√∫ng t√¥i g·ª£i √Ω ƒë·ªãa ƒëi·ªÉm ph√π h·ª£p</p>
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label fw-semibold">Lo·∫°i h√¨nh du l·ªãch y√™u th√≠ch:</label>
                        <div class="d-flex flex-wrap gap-2">
                            <input type="checkbox" class="btn-check" name="travelType" value="Bi·ªÉn" id="prefSea">
                            <label class="btn btn-outline-primary" for="prefSea">üèñÔ∏è Bi·ªÉn</label>
                            
                            <input type="checkbox" class="btn-check" name="travelType" value="N√∫i" id="prefMountain">
                            <label class="btn btn-outline-success" for="prefMountain">‚õ∞Ô∏è N√∫i</label>
                            
                            <input type="checkbox" class="btn-check" name="travelType" value="Th√†nh ph·ªë" id="prefCity">
                            <label class="btn btn-outline-info" for="prefCity">üèôÔ∏è Th√†nh ph·ªë</label>
                            
                            <input type="checkbox" class="btn-check" name="travelType" value="VƒÉn h√≥a" id="prefCulture">
                            <label class="btn btn-outline-warning" for="prefCulture">üèõÔ∏è VƒÉn h√≥a</label>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="form-label fw-semibold">ƒê·ªãa ƒëi·ªÉm quan t√¢m:</label>
                        <div class="d-flex flex-wrap gap-2">
                            <input type="checkbox" class="btn-check" name="locations" value="H√† N·ªôi" id="locHN">
                            <label class="btn btn-outline-secondary" for="locHN">H√† N·ªôi</label>
                            
                            <input type="checkbox" class="btn-check" name="locations" value="H·ªì Ch√≠ Minh" id="locHCM">
                            <label class="btn btn-outline-secondary" for="locHCM">TP.HCM</label>
                            
                            <input type="checkbox" class="btn-check" name="locations" value="ƒê√† N·∫µng" id="locDN">
                            <label class="btn btn-outline-secondary" for="locDN">ƒê√† N·∫µng</label>
                            
                            <input type="checkbox" class="btn-check" name="locations" value="ƒê√† L·∫°t" id="locDL">
                            <label class="btn btn-outline-secondary" for="locDL">ƒê√† L·∫°t</label>
                            
                            <input type="checkbox" class="btn-check" name="locations" value="Nha Trang" id="locNT">
                            <label class="btn btn-outline-secondary" for="locNT">Nha Trang</label>
                        </div>
                    </div>

                    <button id="savePreferencesBtn" class="btn btn-success btn-lg w-100" style="border-radius: 10px;">
                        <i class="fa-solid fa-check me-2"></i>Ho√†n t·∫•t ƒëƒÉng k√Ω
                    </button>
                    
                    <button id="skipPreferencesBtn" class="btn btn-link w-100 mt-2 text-muted">
                        B·ªè qua, ƒë·ªÉ sau
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JS th∆∞ vi·ªán -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- JS custom -->
<script src="{% static 'js/index.js' %}"></script>
{% endblock %}
