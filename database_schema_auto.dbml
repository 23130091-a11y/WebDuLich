// Auto-generated DBML from PostgreSQL database
// Generated by generate_dbml.py
// View at: https://dbdiagram.io/

Project WebDuLich {
  database_type: 'PostgreSQL'
  Note: 'Travel booking platform with AI sentiment analysis'
}

Table travel_category {
  id int [pk]
  name varchar [unique, not null]
  slug varchar [unique, not null]
  description text [not null]
  icon varchar [not null]
  image varchar
  created_at datetime [not null]
  updated_at datetime [not null]
}

Table travel_destination {
  id int [pk]
  name varchar [not null]
  travel_type varchar [not null]
  location varchar [not null]
  address varchar [not null]
  description text [not null]
  image varchar [not null]
  latitude float
  longitude float
  avg_price decimal
  metadata jsonb [not null]
  created_at datetime [not null]
  updated_at datetime [not null]
  is_popular boolean [not null]
  rating float [not null]
  slug varchar [unique]
  tags jsonb [not null]
  category_id int [ref: > travel_category.id]
}

Table travel_destinationimage {
  id int [pk]
  image varchar
  caption varchar
  order int [not null]
  created_at datetime [not null]
  destination_id int [not null, ref: > travel_destination.id]
}

Table travel_recommendationscore {
  id int [pk]
  overall_score float [not null]
  review_score float [not null]
  sentiment_score float [not null]
  popularity_score float [not null]
  total_reviews int [not null]
  avg_rating float [not null]
  positive_review_ratio float [not null]
  last_calculated datetime [not null]
  destination_id int [unique, not null, ref: > travel_destination.id]
}

Table travel_review {
  id int [pk]
  author_name varchar [not null]
  rating int [not null]
  comment text [not null]
  created_at datetime [not null]
  sentiment_score float [not null]
  positive_keywords jsonb [not null]
  negative_keywords jsonb [not null]
  destination_id int [not null, ref: > travel_destination.id]
  helpful_count int [not null]
  is_verified boolean [not null]
  not_helpful_count int [not null]
  report_count int [not null]
  status varchar [not null]
  travel_type varchar [not null]
  travel_with varchar [not null]
  updated_at datetime [not null]
  user_id int [ref: > users_user.id]
  user_agent varchar [not null]
  user_ip inet
  visit_date date
  aspect_scores jsonb [not null]
  sarcasm_risk boolean [not null]
  sentiment_metadata jsonb [not null]
  is_low_quality boolean [not null]
  spam_flags jsonb [not null]
  spam_score float [not null]
}

Table travel_reviewreport {
  id int [pk]
  reporter_ip inet [not null]
  reason varchar [not null]
  description text [not null]
  created_at datetime [not null]
  is_resolved boolean [not null]
  reporter_user_id int [ref: > users_user.id]
  review_id int [not null, ref: > travel_review.id]
}

Table travel_reviewvote {
  id int [pk]
  user_ip inet
  vote_type varchar [not null]
  created_at datetime [not null]
  review_id int [unique, not null, ref: > travel_review.id]
  user_id int [unique, ref: > users_user.id]
}

Table travel_searchhistory {
  id int [pk]
  query varchar [not null]
  user_ip inet
  results_count int [not null]
  created_at datetime [not null]
  user_id int [ref: > users_user.id]
}

Table travel_tourpackage {
  id int [pk]
  name varchar [not null]
  slug varchar [unique]
  details text [not null]
  price decimal
  duration int [not null]
  address_detail varchar
  image_main varchar
  is_active boolean [not null]
  is_available_today boolean [not null]
  start_date date
  end_date date
  tags jsonb [not null]
  created_at datetime [not null]
  updated_at datetime [not null]
  category_id int [ref: > travel_category.id]
  destination_id int [not null, ref: > travel_destination.id]
}

Table users_travelpreference {
  id int [pk]
  travel_type varchar [unique, not null]
  location varchar [unique, not null]
  user_id int [unique, not null, ref: > users_user.id]
}

Table users_user {
  id int [pk]
  password varchar [not null]
  last_login datetime
  is_superuser boolean [not null]
  username varchar [unique, not null]
  first_name varchar [not null]
  last_name varchar [not null]
  is_staff boolean [not null]
  is_active boolean [not null]
  date_joined datetime [not null]
  email varchar [unique, not null]
  avatar varchar
}

Table users_user_groups {
  id int [pk]
  user_id int [unique, not null, ref: > users_user.id]
  group_id int [unique, not null, ref: > auth_group.id]
}

Table users_user_user_permissions {
  id int [pk]
  user_id int [unique, not null, ref: > users_user.id]
  permission_id int [unique, not null, ref: > auth_permission.id]
}
